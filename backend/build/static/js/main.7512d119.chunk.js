(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),u=t(2),i=t(4),o=t.n(i),s="/api/persons",l=function(){return o.a.get(s).then((function(e){return e.data}))},d=l,j=function(e){return o.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return o.a.put("".concat(s,"/").concat(e),n).then(l)},h=function(e){return o.a.delete("".concat(s,"/").concat(e)).then(l)},f=t(0),m=function(e){return Object(f.jsxs)("div",{children:["filter shown with  ",Object(f.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},O=function(e){return Object(f.jsxs)("form",{onSubmit:e.addPerson,children:[Object(f.jsxs)("div",{children:["name:  ",Object(f.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){return Object(f.jsx)("ul",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newFilter.toLowerCase())})).map((function(n){return Object(f.jsxs)("div",{children:[n.name," ",n.number,Object(f.jsx)("button",{onClick:e.deletePerson,name:n.name,id:n.id,children:"delete"})]},n.name)}))})},p=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{className:"message",children:n})},v=function(e){var n=e.error;return null===n?null:Object(f.jsx)("div",{className:"error",children:n})},w=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),i=Object(a.a)(r,2),o=i[0],s=i[1],l=Object(u.useState)(""),w=Object(a.a)(l,2),g=w[0],C=w[1],N=Object(u.useState)(""),S=Object(a.a)(N,2),F=S[0],P=S[1],k=Object(u.useState)(null),y=Object(a.a)(k,2),D=y[0],T=y[1],A=Object(u.useState)(null),E=Object(a.a)(A,2),J=E[0],L=E[1];Object(u.useEffect)((function(){d().then((function(e){c(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(p,{message:D}),Object(f.jsx)(v,{error:J}),Object(f.jsx)(m,{newFilter:F,handleFilterChange:function(e){P(e.target.value)}}),Object(f.jsx)("h3",{children:"Add a new"}),Object(f.jsx)(O,{addPerson:function(e){e.preventDefault();var n={name:o,number:g};t.some((function(e){return e.name===o}))?window.confirm("".concat(o," is already added to phonebook, replace the old number with new one?"))&&b(t.find((function(e){return e.name===o})).id,n).then((function(e){c(e),T("Updated ".concat(o)),setTimeout((function(){T(null)}),5e3)})).catch((function(n){L("Person was already removed from server"),setTimeout((function(){L(null)}),5e3),c(t.filter((function(n){return n.id!==e.target.id})))})):j(n).then((function(e){c(t.concat(e)),T("Added ".concat(o)),s(""),C(""),setTimeout((function(){T(null)}),5e3)}))},newName:o,handleNameChange:function(e){s(e.target.value)},newNumber:g,handleNumberChange:function(e){C(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(x,{persons:t,newFilter:F,deletePerson:function(e){e.preventDefault(),window.confirm("Delete ".concat(e.target.name,"?"))&&h(e.target.id).then((function(e){c(e),T("Deleted"),setTimeout((function(){T(null)}),5e3)}))}})]})};t(38);r.a.render(Object(f.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.7512d119.chunk.js.map